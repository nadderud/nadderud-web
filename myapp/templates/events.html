{% extends "layout.html" %}
{% block body %}
{% if item %}
<h1>Rediger hendelse</h1>
<form method="post">
  <div class="row">
    <div class="col-md-4">
      <div class="form-group">
        <label for="start_at">Start:</label>
        <input type="datetime-local" name="start_at" class="form-control" required="true" value="{{ item.start_at.isoformat('T') }}" />
      </div>
      <div class="form-group">
        <label for="end_at">Slutt:</label>
        <input type="datetime-local" name="end_at" class="form-control" required="true" value="{{ item.end_at.isoformat('T') }}" />
      </div>
    </div>
    <div class="col-md-4">
      <div class="form-group">
        <label for="name">Tema:</label>
        <input type="text" maxlength="150" name="name" class="form-control" required="true" value="{{ item.name }}" />
      </div>
      <div class="form-group">
        <label for="location">Sted:</label>
        <input type="text" maxlength="150" name="location" class="form-control" value="{{ item.location }}" />
      </div>
    </div>
    <div class="col-md-4">
      <div class="form-group">
        <label for="responsibility">Ansvarlig:</label>
        <input type="text" maxlength="150" name="responsibility" class="form-control" value="{{ item.responsibility }}" />
      </div>
      <div class="form-group">
        <label for="remark">Merknad:</label>
        <input type="text" maxlength="150" name="remark" class="form-control" value="{{ item.remark }}" />
      </div>
    </div>
    <div class="col-md-8">
      <div class="form-group">
        <label for="unit">Enhet:</label>
        <select name="unit" class="form-control">
          {% for unit in units %}
            <option value="{{unit.urlsafe()}}"{% if unit == item.unit %} selected{% endif %}>
              {% if unit.parent() %}
                {% for item in unit.pairs()[1:] %}
                  {% if item != unit.pairs()[1:][0] %} / {% endif %}
                  {{ item[1].capitalize() }}
                {% endfor %}
              {% else %}
                -- Alle --
              {% endif %}
            </option>
          {% endfor %}
        </select>
      </div>
    </div>
    <div class="col-md-4 text-right">
      <div class="form-group">
        <button class="btn btn-primary">Lagre endringer</button>
        <button class="btn btn-danger" name="commit" value="delete" onclick="return confirm('Sikker pÃ¥ at du vil slette?')">Slett</button>
      </div>
    </div>
  </div>
</form>
<hr>
<a href="./">Tilbake til oversikten</a>
{% else %}
<h1>Rediger terminliste</h1>
<table class="table table-striped table-condensed table-hover">
  <thead>
    <tr>
      <th>Enhet</th>
      <th>Tid</th>
      <th>Tema</th>
      <th>Sted</th>
      <th>Ansvarlig</th>
      <th>Merknad</th>
    </tr>
  </thead>
  <tbody>
    {% for item in items %}
    <tr>
      <td>{{ item.unit.string_id().capitalize() }}</td>
      <td>{{ item.start_at }} - {{ item.end_at}}</td>
      <td><a href="{{ item.key.integer_id() }}">{{ item.name }}</a></td>
      <td>{{ item.location }}</td>
      <td>{{ item.responsibility }}</td>
      <td>{{ item.remark }}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
<hr>
<form method="post">
  <fieldset>
    <legend>Ny hendelse</legend>
    <div class="form-group">
      <label>
        Start:
        <input type="datetime-local" name="start_at" class="form-control" required="true" />
      </label>
      <label>
        Varighet (timer):
        <input type="number" min="0.5" step="0.5" value="1" name="duration" required="true" class="form-control" />
      </label>
      <label>
        Tema:
        <input type="text" maxlength="150" name="name" class="form-control" required="true" />
      </label>
      <label>
        Sted:
        <input type="text" maxlength="150" name="location" class="form-control" />
      </label>
      <label>
        Ansvarlig:
        <input type="text" maxlength="150" name="responsibility" class="form-control" />
      </label>
      <label>
        Merknad:
        <input type="text" maxlength="150" name="remark" class="form-control" />
      </label>
      <label>
        Enhet:
        <select name="unit" class="form-control">
          {% for unit in units %}
            <option value="{{unit.urlsafe()}}">
              {% if unit.parent() %}
                {% for item in unit.pairs()[1:] %}
                  {% if item != unit.pairs()[1:][0] %} / {% endif %}
                  {{ item[1].capitalize() }}
                {% endfor %}
              {% else %}
                -- Alle --
              {% endif %}
            </option>
          {% endfor %}
        </select>
      </label>
      <button class="btn btn-primary">Opprett</button>
    </div>
  </fieldset>
</form>
{% endif %}
{% endblock %}
