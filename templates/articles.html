{% extends "layout.html" %}
{% block body %}
{% if article %}
<h1>Rediger artikkel</h1>
<form method="post">
  <div class="form-group">
    <label for="title">Tittel:</label>
    <input type="text" name="title" class="form-control input-lg" required="true" value="{{ article.title }}" />
  </div>
  <div class="form-group">
    <label for="description">Beskrivelse/ingress:</label>
    <textarea name="description" class="form-control" required="true">{{ article.description }}</textarea>
  </div>
  <div class="form-group">
    <label for="body">Innhold:</label>
    <textarea name="body" class="form-control" required="true">{{ article.body }}</textarea>
  </div>
  <div class="row">
    <div class="col-md-4">
      <div class="form-group">
        <label for="author">Forfatter:</label>
        <input type="text" name="author" class="form-control" required="true" value="{{ article.author }}" />
      </div>
    </div>
    <div class="col-md-4">
      <div class="form-group">
        <label for="unit">Enhet:</label>
        <select name="unit" class="form-control">
          {% for unit in units %}
            <option value="{{unit.urlsafe()}}"{% if unit == article.unit %} selected{% endif %}>
              {% if unit.parent() %}
                {% for item in unit.pairs()[1:] %}
                  {% if item != unit.pairs()[1:][0] %} / {% endif %}
                  {{ item[1].capitalize() }}
                {% endfor %}
              {% else %}
                -- Alle --
              {% endif %}
            </option>
          {% endfor %}
        </select>
      </div>
    </div>
    <div class="col-md-4 text-right">
      <div class="form-group">
        <button class="btn btn-primary">Lagre endringer</button>
        <button class="btn btn-danger" name="commit" value="delete" onclick="return confirm('Sikker pÃ¥ at du vil slette?')">Slett</button>
      </div>
    </div>
  </div>
</form>
<hr>
<a href="./">Tilbake til oversikten</a>
{% else %}
<h1>Rediger artikler</h1>
<table class="table table-striped table-condensed table-hover">
  <thead>
    <tr>
      <th>Enhet</th>
      <th>Tittel</th>
      <th>Opprettet</th>
    </tr>
  </thead>
  <tbody>
    {% for article in articles %}
    <tr>
      <td>{{ article.unit.string_id().capitalize() }}</td>
      <td>
        <strong><a href="{{ article.key.integer_id() }}">{{ article.title }}</a></strong>
        <br>
        <small>{{ article.description }}</small>
      </td>
      <td>{{ article.created_at }}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
<hr>
<form method="post">
  <fieldset>
    <legend>Ny artikkel</legend>
    <div class="form-group">
      <label for="title">Tittel:</label>
      <input type="text" name="title" class="form-control input-lg" required="true" />
    </div>
    <div class="form-group">
      <label for="description">Beskrivelse/ingress:</label>
      <textarea name="description" class="form-control" required="true"></textarea>
    </div>
    <div class="form-group">
      <label for="body">Innhold:</label>
      <textarea name="body" class="form-control" required="true"></textarea>
    </div>
    <div class="row">
      <div class="col-md-4">
        <div class="form-group">
          <label for="author">Forfatter:</label>
          <input type="text" name="author" class="form-control" required="true" />
        </div>
      </div>
      <div class="col-md-4">
        <div class="form-group">
          <label for="unit">Enhet:</label>
          <select name="unit" class="form-control">
            {% for unit in units %}
              <option value="{{unit.urlsafe()}}">
                {% if unit.parent() %}
                  {% for item in unit.pairs()[1:] %}
                    {% if item != unit.pairs()[1:][0] %} / {% endif %}
                    {{ item[1].capitalize() }}
                  {% endfor %}
                {% else %}
                  -- Alle --
                {% endif %}
              </option>
            {% endfor %}
          </select>
        </div>
      </div>
      <div class="col-md-4 text-right">
        <div class="form-group">
          <button class="btn btn-success">Opprett</button>
        </div>
      </div>
    </div>
  </fieldset>
</form>
{% endif %}
{% endblock %}
